SSH known hosts Infrastructure SOP

   Provides Known Hosts file that is globally deployed and publicly available
   at:
   https://admin.fedoraproject.org/ssh_known_hosts

Contact Information

   Owner: Fedora Infrastructure Team

   Contact: #fedora-admin, sysadmin group

   Location: all

   Servers: all

   Purpose: Provides Known Hosts file that is globally deployed.

Replacing Key

There is a script in ansible to fetch the ssh rsa host keys for all hosts. The
ssh_known_hosts files is stored in puppet, therefore you need to check out both
git repos:

   git clone /git/ansible
   git clone /git/puppet

Then run the script:

   cd ansible/scripts
   sudo -i ./fetch-ssh-keys > ../../puppet/modules/ssh/files/ssh_known_hosts
   cd ../../puppet/modules/ssh/files
   git commit -va
   git push

That should do it.

Just like magic, or something.

----------------------

Adding  a host alias to the ssh_known_hosts

If you need to add a host alias to a host in ssh_known_hosts simply
go to the dir for the host in infra-hosts and add a file named host_aliases
to the git repo in that dir. Put one alias per line and save.

Then the next time fetch-ssh-keys runs it will add those aliases to known hosts.
